import{r as a,m as e,j as f,c as $,R as G,H as J,a as Q}from"./vendor-b46506e3.js";(function(){const g=document.createElement("link").relList;if(g&&g.supports&&g.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))A(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const s of l.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&A(s)}).observe(document,{childList:!0,subtree:!0});function r(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerPolicy&&(l.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?l.credentials="include":n.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function A(n){if(n.ep)return;n.ep=!0;const l=r(n);fetch(n.href,l)}})();const X=`#root{background-color:#fff;color:#ffffffde;color-scheme:light;font-family:Inter,Avenir,Helvetica,Arial,sans-serif;font-size:16px;font-synthesis:none;font-weight:400;height:100vh;line-height:24px;margin:0;padding:0;text-rendering:optimizeLegibility;width:100vw;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-text-size-adjust:100%}a{color:#646cff;font-weight:500;text-decoration:inherit}a:hover{color:#535bf2}body{display:flex;margin:0;min-height:100vh;min-width:320px;place-items:center}h1{font-size:3.2em;line-height:1.1}button{background-color:#1a1a1a;border:1px solid transparent;border-radius:8px;cursor:pointer;font-family:inherit;font-size:1em;font-weight:500;padding:.6em 1.2em;transition:border-color .25s}button:hover{border-color:#646cff}button:focus,button:focus-visible{outline:4px auto -webkit-focus-ring-color}@media (prefers-color-scheme:light){#root{background-color:#fff;color:#213547}a:hover{color:#747bff}button{background-color:#f9f9f9}}
`,H="/assets/react-35ef61ed.svg",O="/vite.svg",Y="/assets/plug-4a73dab3.png",Z="/assets/plug2-fcde437e.png",_="/assets/outlet-2a34fa6c.png",ee="/assets/wallsocket-880de703.png";function te(){const y=a.useRef(null),g=a.useRef(null),r=a.useRef(null),A=a.useRef(!1);a.useRef(!1);const n=a.useRef(e.Engine.create()),l=a.useRef(e.Runner.create()),s=a.useRef(e.Render.create({element:y.current,engine:n.current,options:{width:800,height:600,wireframes:!1,background:"transparent",showCollisions:!0,showVelocity:!0}})),N=a.useRef({outlet1:!1,outlet2:!1}),F=a.useRef(!1);a.useState(!1),a.useState(!1);function T(){console.log("App mounted"),r.current=null;const d=window.innerWidth,u=window.innerHeight;y.current&&y.current.children.length==0&&(console.log("Creating canvas"),s.current=e.Render.create({element:y.current,engine:n.current,options:{width:d,height:u,wireframes:!1,background:"transparent",showCollisions:!0,showVelocity:!0}})),e.World.add(n.current.world,[e.Bodies.rectangle(-10,u/2,20,u*3,{isStatic:!0}),e.Bodies.rectangle(d/2,u+10,d,20,{isStatic:!0}),e.Bodies.rectangle(d+10,u/2,20,u*3,{isStatic:!0})]),e.Runner.run(l.current,n.current),e.Render.run(s.current);const w=1,h=2,t=e.Composites.stack(d/4,-300,10,1,20,10,function(o,i){return e.Bodies.rectangle(o,i,50,20,{collisionFilter:{category:h,group:h}})});e.Composite.add(t,e.Bodies.circle(450,-80,20,{density:.001,collisionFilter:{group:h,category:h,mask:-1}})),e.Composite.add(t,e.Bodies.circle(250,-80,40,{density:.001,collisionFilter:{group:h,category:h,mask:-1}})),e.Composites.chain(t,.5,0,-.5,0,{stiffness:.4,length:40,render:{type:"line"}}),e.Composite.add(t,e.Constraint.create({bodyB:t.bodies[0],pointB:{x:-25,y:0},pointA:{x:t.bodies[0].position.x,y:t.bodies[0].position.y},stiffness:.5}));const c=e.Bodies.rectangle(d*3/4,u/2+95/2,130,200,{isStatic:!0,collisionFilter:{mask:w},frictionAir:.1}),b=e.Bodies.rectangle(c.position.x,c.position.y-45,40,40,{isStatic:!0,collisionFilter:{mask:h},label:"outlet1"}),v=e.Bodies.rectangle(c.position.x,c.position.y+45,40,40,{isStatic:!0,collisionFilter:{mask:h},label:"outlet2"});e.World.add(n.current.world,[b,v,c]);const V=[b,v];e.Composite.add(n.current.world,[t]),e.Body.setVelocity(t.bodies[t.bodies.length-1],{x:-.5,y:-1});const S=e.Mouse.create(s.current.canvas),L=e.MouseConstraint.create(n.current,{mouse:S,constraint:{stiffness:.2,render:{visible:!0}}});e.Composite.add(n.current.world,L),s.current.mouse=S;const k=new Image(150,150);k.src=Y,k.onload=()=>{s.current.textures[H]=k};const C=new Image(125,125);C.src=Z,C.onload=()=>{s.current.textures[H]=C};function D(o){const i=t.bodies;if(r.current){const m=t.bodies.length-2,x=t.bodies[m+1];o.drawImage(C,x.position.x-C.width/2,x.position.y-C.height/2,C.width,C.height)}for(let m=1;m<i.length-(r.current?0:1);m+=1){const x=i[m-1],j=i[m],M={x:x.position.x+30*Math.cos(x.angle),y:x.position.y+30*Math.sin(x.angle)},W={x:j.position.x-30*Math.cos(j.angle),y:j.position.y-30*Math.sin(j.angle)};o.beginPath(),o.moveTo(x.position.x,x.position.y),o.bezierCurveTo(M.x,M.y,W.x,W.y,j.position.x,j.position.y),o.strokeStyle="black",o.lineWidth=20,o.stroke(),o.strokeStyle="white",o.lineWidth=16,o.stroke()}const p=t.bodies.length-2,E=t.bodies[p],P=Math.atan2(i[p+1].position.y-i[p-1].position.y,i[p+1].position.x-i[p-1].position.x);r.current||(o.save(),o.translate(E.position.x,E.position.y),o.rotate(P),o.drawImage(k,0,-k.height/2,k.width,k.height),o.restore())}const B=new Image(125,125);B.src=_,B.onload=()=>{s.current.textures[O]=B};const R=new Image(275,275);R.src=ee,R.onload=()=>{s.current.textures[O]=R};function q(o,i){o.drawImage(R,i.position.x-R.width/2,i.position.y-R.height/2,R.width,R.height)}function K(o,i){o.drawImage(B,i.position.x-B.width/2,i.position.y-B.height/2,B.width,B.height)}function U(o){var i,p;return A.current?((i=e.Collision.collides(o,t.bodies[t.bodies.length-1]))==null?void 0:i.collided)??!1:(p=e.Collision.collides(o,t.bodies[t.bodies.length-1]))!=null&&p.collided?(console.log("Connected"),r.current==o||(r.current&&(console.log("Disconnecting"),o.collisionFilter.mask=h,e.Composite.remove(t,t.constraints[t.constraints.length-1])),r.current=o,e.Body.setPosition(t.bodies[t.bodies.length-1],{x:o.position.x,y:o.position.y}),e.Composite.add(t,e.Constraint.create({bodyB:t.bodies[t.bodies.length-1],pointB:{x:0,y:0},pointA:{x:o.position.x,y:o.position.y},stiffness:.1})),o.collisionFilter.mask=w,A.current=!0,setTimeout(()=>{A.current=!1},1e3)),!0):(r.current===o&&(console.log("Disconnected"),e.Composite.remove(t,t.constraints[t.constraints.length-1]),r.current=null,o.collisionFilter.mask=h),!1)}let I={x:-1,y:-1};e.Events.on(n.current,"afterUpdate",function(){var i,p,E;const o=(i=g.current)==null?void 0:i.getContext("2d");o&&(L.body==c?(I.x==-1&&I.y==-1&&(I={x:c.position.x-S.position.x,y:c.position.y-S.position.y}),console.log("Wall is being dragged",I),e.Body.setPosition(c,{x:S.position.x+I.x,y:S.position.y+I.y}),r.current&&r.current==b?(e.Body.setPosition(t.bodies[t.bodies.length-1],{x:b.position.x,y:b.position.y}),e.Body.setVelocity(t.bodies[t.bodies.length-1],{x:0,y:0}),e.Composite.remove(t,t.constraints[t.constraints.length-1]),e.Composite.add(t,e.Constraint.create({bodyB:t.bodies[t.bodies.length-1],pointB:{x:0,y:0},pointA:{x:b.position.x,y:b.position.y},stiffness:.1}))):r.current&&r.current==v&&(e.Body.setPosition(t.bodies[t.bodies.length-1],{x:v.position.x,y:v.position.y}),e.Body.setVelocity(t.bodies[t.bodies.length-1],{x:0,y:0}),e.Composite.remove(t,t.constraints[t.constraints.length-1]),e.Composite.add(t,e.Constraint.create({bodyB:t.bodies[t.bodies.length-1],pointB:{x:0,y:0},pointA:{x:v.position.x,y:v.position.y},stiffness:.1})))):I={x:-1,y:-1},e.Body.setAngle(c,0),e.Body.setPosition(b,{x:c.position.x,y:c.position.y-45}),e.Body.setPosition(v,{x:c.position.x,y:c.position.y+45}),(E=(p=g.current)==null?void 0:p.getContext("2d"))==null||E.clearRect(0,0,g.current.width,g.current.height),q(o,c),V.forEach(P=>{const m=U(P);P.label=="outlet1"&&m&&(N.current[P.label]=m,F.current=m),K(o,P)}),D(o))})}function z(){console.log("Resizing canvas");const d=window.innerWidth,u=window.innerHeight;s.current.canvas.height=u,s.current.canvas.width=d,s.current.bounds.max.x=d,s.current.bounds.max.y=u;const w=g.current;w&&(w.setAttribute("width",d.toString()),w.setAttribute("height",u.toString()),w.style.width=d+"px",w.style.height=u+"px")}return a.useEffect(()=>(y.current&&(y.current.innerHTML="",T()),setTimeout(()=>{z()},100),window.addEventListener("resize",z),()=>{console.log("App unmounted"),e.Runner.stop(l.current),e.Render.stop(s.current),e.World.clear(n.current.world,!1),s.current.textures={}}),[y.current]),f.jsxs(f.Fragment,{children:[f.jsx("div",{ref:y,className:"h-screen w-screen opacity-10"}),f.jsx("canvas",{ref:g,className:"absolute left-0 top-0 h-full w-full",style:{pointerEvents:"none"}}),f.jsx("div",{className:"pointer-events-none absolute left-0 top-0 h-screen w-screen text-black",children:F.current&&f.jsx("p",{children:"Bryant Hargreaves"})})]})}const oe={};$.createRoot(document.getElementById("root")).render(f.jsx(G.StrictMode,{children:f.jsxs(J,{context:oe,children:[f.jsx(Q,{children:f.jsx("style",{children:X})}),f.jsx(te,{})]})}));
